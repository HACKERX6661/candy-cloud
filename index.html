<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candy Cloud Shop</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            text-align: center; padding: 20px; margin: 0; min-height: 100vh;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .shop-container { 
            background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; 
            display: inline-block; max-width: 450px; width: 100%; box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
            backdrop-filter: blur(5px); margin-top: 50px;
        }
        .product-card { 
            border: 1px solid #ddd; border-radius: 12px; margin-bottom: 12px; padding: 15px; 
            display: flex; align-items: center; text-align: left; background: #fff; 
        }
        .product-card img { width: 60px; height: 60px; border-radius: 8px; margin-right: 15px; object-fit: contain; }
        .price { color: #2e7d32; font-weight: bold; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        .buy-button { 
            background: #23a6d5; color: white; padding: 15px 30px; border: none; 
            border-radius: 10px; font-size: 18px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 15px;
        }
        .info-box { background: #e3f2fd; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; }
    </style>
</head>
<body>

    <div id="auth-gate" class="shop-container">
        <h2>üîê Candy Cloud Login</h2>
        <p>Gib deine E-Mail an f√ºr den 6-stelligen Code:</p>
        <input type="email" id="userEmail" placeholder="Deine E-Mail Adresse" required>
        <button onclick="sendCode()" class="buy-button">Code anfordern</button>
        
        <div id="code-section" style="display: none; margin-top: 20px;">
            <p>Code aus der E-Mail eingeben:</p>
            <input type="text" id="inputCode" placeholder="6-stelliger Code" maxlength="6">
            <button onclick="verifyCode()" class="buy-button" style="background: #23d5ab;">Shop √∂ffnen</button>
        </div>
    </div>

    <div id="main-shop" class="shop-container" style="display: none;">
        <h1>‚òÅÔ∏è Candy Cloud ‚òÅÔ∏è</h1>
        <div class="info-box">üöö Versandkosten: 4,50 ‚Ç¨ werden am Ende hinzugef√ºgt.</div>

        <form name="candy-order" method="POST" data-netlify="true" data-netlify-recaptcha="true" action="/success.html">
            <div class="product-card">
                <img src="prime.jpg" alt="Prime">
                <div class="product-info"><strong>Prime Hydration</strong><br><span class="price">3,50 ‚Ç¨</span></div>
                <input type="checkbox" name="item" value="Prime">
            </div>

            <div class="product-card">
                <img src="takis.jpg" alt="Takis">
                <div class="product-info"><strong>Takis Fuego</strong><br><span class="price">4,50 ‚Ç¨</span></div>
                <input type="checkbox" name="item" value="Takis">
            </div>

            <input type="text" name="name" placeholder="Dein Name" required>
            <input type="text" name="adresse" placeholder="Lieferadresse" required>

            <div data-netlify-recaptcha="true"></div>

            <button type="submit" class="buy-button">Bestellung abschicken & Rechnung erhalten</button>
        </form>
    </div>

    <script>
        let generatedCode;

        function sendCode() {
            const email = document.getElementById('userEmail').value;
            if(!email.includes('@')) return alert("Bitte eine echte E-Mail angeben!");
            
            // Bot generiert Code
            generatedCode = Math.floor(100000 + Math.random() * 900000);
            
            // HINWEIS: Damit die Mail wirklich ankommt, brauchen wir EmailJS.
            // F√ºr den Test zeigt der Browser den Code jetzt als Alarm an:
            alert("BOT-NACHRICHT: Dein Login-Code ist: " + generatedCode);
            document.getElementById('code-section').style.display = 'block';
        }

        function verifyCode() {
            const input = document.getElementById('inputCode').value;
            if(input == generatedCode) {
                document.getElementById('auth-gate').style.display = 'none';
                document.getElementById('main-shop').style.display = 'block';
            } else {
                alert("Falscher Code! Schau nochmal in deine Mails.");
            }
        }
    </script>
</body>
</html>